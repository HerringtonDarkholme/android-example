package h.chan.compass

import android.util.AttributeSet
import android.content.Context
import android.view.View

class CompassView(ctx: Context,
                  attrs: AttributeSet,
                  style:  Int
  ) extends View(ctx, attrs, style) {

  val r = getResources()
  var markerPaint: Paint = _
  var textPaint: Paint = _
  var circlePaint: Paint = _
  var northString: String = _
  var eastString: String = _
  var southString: String = _
  var westString: String = _
  var textHeight: Int = _

  setFocusable(true)


  private var _bearing: Float = _

  def bearing = _bearing
  def bearing_=(b: Float) = _bearing = b

  def this(ctx: Context) = this(ctx, null, 0)
  def this(ctx: Context, attrs: AttributeSet) =
    this(ctx, attrs, 0)


  override def onMeasure(widthSpec: Int, heightSpec: Int): Unit = {
    val measuredWidth = measure(widthSpec)
    val measuredHeight = measure(heightSpec)
    val dim = Math.min(measuredWidth, measuredHeight)

    setMeasuredDimension(dim, dim)
  }

  private[this] def measure(spec: Int): Int = {
    val specMode = MeasureSpec.getMode(spec)
    val specSize = MeasureSpec.getSize(spec)
    if (specMode == MeasureSpec.UNSPECIFIED) 200
    else specSize
  }
}

class CompassActivity extends Activity {

  override def onCreate()
}
