package com.example.hello

import java.util.ArrayList
import android.app.Activity
import android.os.Bundle
import android.view.KeyEvent
import android.view.View
import android.widget.ArrayAdapter
import android.widget.EditText
import android.widget.ListView

class MainActivity extends Activity {

  def onCreate(savedInstanceState: Bundle) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)
    val myListView = findViewById(R.id.myListView).asInstanceOf[ListView]
    val myEditText = findViewById(R.id.myEditText).asInstanceOf[EditText]
    val todoItems = new ArrayList[String]()
    var aa: ArrayAdapter[String] = null
    aa = new ArrayAdapter[String](this, android.R.layout.simple_list_item_1, todoItems)
    myListView.setAdapter(aa)
    myEditText.setOnKeyListener(new View.OnKeyListener() {

      override def onKey(v: View, keyCode: Int, event: KeyEvent): Boolean = {
        if (event.getAction == KeyEvent.ACTION_DOWN) {
          if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER || keyCode == KeyEvent.KEYCODE_ENTER) {
            todoItems.add(0, myEditText.getText.toString)
            aa.notifyDataSetChanged()
            myEditText.setText("")
            return true
          }
        }
        false
      }
    })
  }
}
